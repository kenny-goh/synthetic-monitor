---
name: "Customer Onboarding Test (Test)"
description: null
scheduleTimeInSeconds: 3600
pauseTimeBetweenActionsMillis: 50
type: "API"
active: true
actions:
  - !<API>
    name: "Step 1: Request token"
    type: "API"
    excludeInTestReport: false
    optimalResponseThreshold: 200
    maximalResponseThreshold: 2000
    requestMethod: "POST"
    requestUrl: "http://reecetstausys.reece.com.au/au/customer-application-onboarding-gateway/request-token"
    requestHeaders:
      consumer-key: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiUFZUVkVORE9SIiwiZW52Ijoic3RhZ2UifQ.Y5tRmPOLiz8UgUusVRBXVMTPl8TYbtOhPVHdslSNhm0"
    expectedStatus: "201"
    postRequestScript:
      String token = context.jsonPath('$.' + 'requestToken');
      context.vars.put('token', token);
  - !<API>
    name: "Step 2: Authorize token"
    type: "API"
    excludeInTestReport: false
    optimalResponseThreshold: 200
    maximalResponseThreshold: 2000
    requestMethod: "PUT"
    requestUrl: "http://reecetstausys.reece.com.au/customer-application-onboarding-gateway/request-token/{token}"
    requestHeaders:
      Content-Type: "application/json"
      consumer-key: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiUFZUVkVORE9SIiwiZW52Ijoic3RhZ2UifQ.Y5tRmPOLiz8UgUusVRBXVMTPl8TYbtOhPVHdslSNhm0"
    requestBody: >
        {"customerNumber":"3971"}
    expectedStatus: "204"
  - !<API>
    name: "Step 3: Create customer token"
    type: "API"
    excludeInTestReport: false
    optimalResponseThreshold: 200
    maximalResponseThreshold: 2000
    requestMethod: "POST"
    requestUrl: "http://reecetstausys.reece.com.au/customer-application-onboarding-gateway/customer-token"
    requestHeaders:
      Content-Type: "application/json"
      consumer-key: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiUFZUVkVORE9SIiwiZW52Ijoic3RhZ2UifQ.Y5tRmPOLiz8UgUusVRBXVMTPl8TYbtOhPVHdslSNhm0"
      x-authenticated-consumer: "PVTVENDOR"
    requestBody: >
      {"requestToken":"${token}"}
    postRequestScript:
      String customerToken = context.jsonPath('$.' + 'customerToken');
      context.vars.put('customerToken', customerToken);
    expectedStatus: "201"
  - !<API>
    name: "Step 4: Delete customer token"
    type: "API"
    excludeInTestReport: false
    optimalResponseThreshold: 200
    maximalResponseThreshold: 2000
    requestMethod: "DELETE"
    requestUrl: "http://reecetstausys.reece.com.au/au/customer-application-onboarding-gateway/customer-token/{customerToken}"
    requestHeaders:
      Content-Type: "application/json"
      consumer-key: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiUFZUVkVORE9SIiwiZW52Ijoic3RhZ2UifQ.Y5tRmPOLiz8UgUusVRBXVMTPl8TYbtOhPVHdslSNhm0"
    expectedStatus: "204"




